# –Ü–Ω—Ç–µ—Ä–Ω–µ—Ç-–º–∞–≥–∞–∑–∏–Ω

## –°–ø–∏—Å–æ–∫ —É—á–∞—Å–Ω–∏–∫—ñ–≤ –∫–æ–º–∞–Ω–¥–∏
>- –ë–æ—è—Ä–∫—ñ–Ω–∞ –û—Ä–∏–Ω–∞(TEAMLEAD) - [–¥–∏–≤–∏—Ç–∏—Å—è –Ω–∞ –ì—ñ—Ç–•–∞–±](https://github.com/BoiarkinaOryna)
>- –§—ñ–ª–∏–Ω—Å—å–∫–∞ –î–∞—Ä'—è - [–¥–∏–≤–∏—Ç–∏—Å—è –Ω–∞ –ì—ñ—Ç–•–∞–±](https://github.com/DariaFilinskaya)
>- –ì–æ–º–µ–ª—å—Å—å–∫–∞ –í—ñ–∫—Ç–æ—Ä—ñ—è -  [–¥–∏–≤–∏—Ç–∏—Å—è –Ω–∞ –ì—ñ—Ç–•–∞–±](https://github.com/Viktoria0228)
>- –ë—É—Ä–ª–∞–∫–æ–≤–∞ –ê–ª—ñ—Å–∞ - [–¥–∏–≤–∏—Ç–∏—Å—è –Ω–∞ –ì—ñ—Ç–•–∞–±](https://github.com/archalice)
>- –ü—ñ–ª–∞—Ç –í—ñ–∫—Ç–æ—Ä - [–¥–∏–≤–∏—Ç–∏—Å—è –Ω–∞ –ì—ñ—Ç–•–∞–±](https://github.com/VictorPilat)

## –©–æ —Ä–æ–±–∏—Ç—å –Ω–∞—à –ø—Ä–æ–µ–∫—Ç

#### –ù–∞—à –ø—Ä–æ–µ–∫—Ç - —Ü–µ —ñ–Ω—Ç–µ—Ä–Ω–µ—Ç-–º–∞–≥–∞–∑–∏–Ω –∑ —ñ–Ω—Ç–µ–≥—Ä–æ–≤–∞–Ω–∏–º –¢–µ–ª–µ–≥—Ä–∞–º-–±–æ—Ç–æ–º, –ø—Ä–∏–∑–Ω–∞—á–µ–Ω–∏–π –¥–ª—è –Ω–∞–¥–∞–Ω–Ω—è —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—ó –ø—Ä–æ —Ç–æ–≤–∞—Ä–∏ —Ç–∞ —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞–º–∏, –∑–æ–∫—Ä–µ–º–∞ –¥–æ–¥–∞–≤–∞–Ω–Ω—è —ñ –≤–∏–¥–∞–ª–µ–Ω–Ω—è –ø–æ–∫—É–ø—Ü—ñ–≤, –∞ —Ç–∞–∫–æ–∂ –Ω–∞–¥–∞–Ω–Ω—è –ø—Ä–∞–≤ –∞–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä–∞.


–ù–∞—à –ø—Ä–æ–µ–∫—Ç —Å—Ç–≤–æ—Ä–µ–Ω–∏–π –¥–ª—è _–ª–µ–≥–∫–æ–≥–æ_ –¥–æ—Å—Ç—É–ø—É –¥–æ —Ç–æ–≤–∞—Ä—ñ–≤ —ñ–∑ _–∑—Ä–æ–∑—É–º—ñ–ª–∏–º_ —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–º —Ç–∞ –º–æ–∂–ª–∏–≤—ñ—Å—Ç—é –∫—É–ø—ñ–≤–ª—ñ –æ–±—Ä–∞–Ω–∏—Ö –ø—Ä–æ–¥—É–∫—Ç—ñ–≤. –°–∞–π—Ç, —Ç–∞–∫–æ–∂, –º–∞—î –∞–¥–º—ñ–Ω-–ø–∞–Ω–µ–ª—å, —â–æ –Ω–∞–±–∞–≥–∞—Ç–æ –æ–±–ª–µ–≥—à—É—î _—Ä–µ–¥–∞–≥—É–≤–∞–Ω–Ω—è, –¥–æ–¥–∞–≤–∞–Ω–Ω—è —Ç–∞ –≤–∏–¥–∞–ª–µ–Ω–Ω—è_ —Ç–æ–≤–∞—Ä—ñ–≤.

–î–ª—è –Ω–∞—Å —Ü–µ–π –ø—Ä–æ–µ–∫—Ç –º–∞—î –≤–µ–ª–∏–∫–µ –∑–Ω–∞—á–µ–Ω–Ω—è, —è–∫ –¥–æ –ø—Ä–æ–≥—Ä–∞–º—ñ—Å—Ç—ñ–≤-–ø–æ—á–∞—Ç–∫—ñ–≤—Ü—ñ–≤, —Ç–∏–º, —â–æ –º–∏ –æ–±'—î–¥–Ω–∞–ª–∏ —Ä—ñ–∑–Ω—ñ —Ç–µ—Ö–Ω–æ–ª–æ–≥—ñ—ó –¥–ª—è –π–æ–≥–æ —Ä–µ–∞–ª—ñ–∑—É–≤–∞–Ω–Ω—è. –¢–∞–∫—ñ —è–∫, _Flask, GitHub, SQLite3, pandas_, telebot, HTML, CSS, —Ç–∞ Javascript.

### –î–ª—è –∑–∞–ø—É—Å–∫—É –ø—Ä–æ–µ–∫—Ç—É –Ω–µ–æ–±—Ö—ñ–¥–Ω–æ –∑–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ :

- **Flask** - —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∏ —Å–∞–π—Ç—É
- **pandas**- –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è —Ç–æ–≤–∞—Ä—ñ–≤ –∑ —Ç–∞–±–ª–∏—Ü—ñ
- **Flask-Login** - –¥–æ–¥–∞–≤–∞–Ω–Ω—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—ó –¥–æ —Å–∞–π—Ç—É
- **Flask-Migrate** - –ø—Ä–∏–≤'—è–∑—É–≤–∞–Ω–Ω—è –±–∞–∑–∏ –¥–∞–Ω–∏—Ö –¥–æ –¥–æ –ø—Ä–æ–µ–∫—Ç—É
- **Flask-SQLALchemy** - –ø—Ä–∞—Ü—é—î –∑ –±–∞–∑–æ—é –¥–∞–Ω–Ω–∏—Ö sql3
- **Flask-Mail** - –≤—ñ–¥–ø—Ä–∞–≤–∫–∞ email
- **telebot** - —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è —Ç—É–ª–µ–≥—Ä–∞–º-–±–æ—Ç—É
- **Jinja2** - —à–∞–±–ª–æ–Ω—ñ–∑–∞—Ü—ñ—è –≤–µ–±-–∑–∞—Å—Ç–æ—Å—É–Ω–∫—É
- **requests** - —Ä–æ–±–æ—Ç–∞ –∑ http –∑–∞–ø–∏—Ç–∞–º–∏


#### –©–æ–± –∑–∞–ø—É—Å—Ç–∏—Ç–∏ –ø—Ä–æ–µ–∫—Ç –ª–æ–∫–∞–ª—å–Ω–æ, –Ω–µ–æ–±—Ö—ñ–¥–Ω–æ –≤—ñ–¥–∫—Ä–∏—Ç–∏ –ø—Ä–æ–µ–∫—Ç —É –¥–æ–¥–∞—Ç–∫—É VSCode –∞–±–æ —ñ–Ω—à–æ–º—É —Ä–µ–¥–∞–∫—Ç–æ—Ä—ñ –¥–ª—è –∫–æ–¥—É —Ç–∞ –∑–∞–ø—É—Å—Ç–∏—Ç–∏ —Ñ–∞–π–ª manage.py

#### –©–æ–± –∑–∞–ø—É—Å—Ç–∏—Ç–∏ –ø—Ä–æ–µ–∫—Ç –≤—ñ–¥–¥–∞–ª–µ–Ω–æ, –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–π—Ç–µ —Å–µ—Ä–≤–µ—Ä [pythonanywhere](https://www.pythonanywhere.com) –¥–ª—è Flask —Ç–∞ Django –ø—Ä–æ–µ–∫—Ç—ñ–≤

## –ü—Ä–æ–µ–∫—Ç –º—ñ—Å—Ç–∏—Ç—å —Ç–∞–∫—ñ –∑–∞—Å—Ç–æ—Å—É–Ω–∫–∏:

- **Home** - –¥–æ–º–∞—à–Ω—è —Å—Ç–æ—Ä—ñ–Ω–∫–∞
- **Registration** - —Å—Ç–æ—Ä—ñ–Ω–∫–∞ —Ä–µ—î—Å—Ç—Ä–∞—Ü—ñ—ó
- **Authorization** - —Å—Ç–æ—Ä—ñ–Ω–∫–∞ –¥–ª—è –≤—Ö–æ–¥—É –≤ –∞–∫–∞—É–Ω—Ç
- **Shop** - –∫–∞—Ç–∞–ª–æ–≥ —Ç–æ–≤–∞—Ä—ñ–≤
- **Cart** - –ø–µ—Ä–µ–ª—ñ–∫ –æ–±—Ä–∞–Ω–∏—Ö —Ç–æ–≤–∞—Ä—ñ–≤
- **Contacts** - –ø–µ—Ä–µ–ª—ñ–∫ –∫–æ–Ω—Ç–∞–∫—Ç—ñ–≤-–ø—Ä–æ–¥–∞–≤—Ü—ñ–≤
- **Admin** - –¥–ª—è —Ä–µ–¥–∞–≥—É–≤–∞–Ω–Ω—è —Ç–æ–≤–∞—Ä—ñ–≤

### –°—Ç–≤–æ—Ä–µ–Ω–Ω—è —à–∞–±–ª–æ–Ω—É –ø—Ä–æ–µ–∫—Ç—É

–ù–µ–æ–±—Ö—ñ–¥–Ω–æ —Å—Ç–≤–æ—Ä–∏—Ç–∏ –µ–ª–µ–º–µ–Ω—Ç –∫–ª–∞—Å—É Flask –±—ñ–±–ª—ñ–æ—Ç–µ–∫–∏ flask —ñ –∑–∞–¥–∞—Ç–∏ –π–æ–º—É –Ω–µ–æ–±—Ö—ñ–¥–Ω—ñ –ø–∞—Ä–∞–º–µ—Ç—Ä–∏: 
import_name - –Ω–∞–∑–≤–∞ —Ñ–∞–π–ª—É, —É —è–∫–æ–º—É —Å—Ç–≤–æ—Ä–µ–Ω–æ –∑–º—ñ–Ω–Ω—É, template-folder - —à–ª—è—Ö –¥–æ –ø–∞–ø–∫–∏ templates —Ç–∞ instance-path - –∞–±—Å–æ–ª—é—Ç–Ω–∏–π —à–ª—è—Ö –¥–æ –ø–∞–ø–∫–∏, —É —è–∫—ñ–π –∑–Ω–∞—Ö–æ–¥–∏—Ç—å—Å—è –¥–∞–Ω–∏–π —Ñ–∞–π–ª.

```
shop = flask.Flask(
    import_name = "project",
    template_folder = "templates",
    instance_path = os.path.abspath(__file__ + "/..")
)
```

### –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –≤–µ–±-—Å—Ç–æ—Ä—ñ–Ω–æ–∫
–°—Ç–≤–æ—Ä–µ–Ω–Ω—è –≤–µ–±-—Å—Ç–æ—Ä—ñ–Ω–æ–∫ –≤—ñ–¥–±—É–≤–∞—î—Ç—å—Å—è, –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é –∫–ª–∞—Å—É **Blueprint**, –≤ —è–∫–æ–º—É –∑–∞–¥–∞—é—Ç—å—Å—è –ø–∞—Ä–∞–º–µ—Ç—Ä–∏:
name - –≤—ñ–¥–ø–æ–≤—ñ–¥–∞—î –∑–∞ –Ω–∞–∑–≤—É blueprint.
import_name -  –≤—ñ–¥–ø–æ–≤—ñ–¥–∞—î –∑–∞ –Ω–∞–∑–≤—É —Ç–µ–∫–∏, —É —è–∫—ñ–π —Å—Ç–≤–æ—Ä—é—î—Ç—å—Å—è –ø–µ–≤–Ω–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞.
template_folder - –≤—ñ–¥–ø–æ–≤—ñ–¥–∞—î –∑–∞ —Ç–µ–∫—É templates, —è–∫–∞ –º—ñ—Å—Ç–∏—Ç—å –≤ —Å–æ–±—ñ html —Ñ–∞–π–ª.
static_folder - –≤—ñ–¥–ø–æ–≤—ñ–¥–∞—î –∑–∞ —Ç–µ–∫—É static, —è–∫–∞ –º—ñ—Å—Ç–∏—Ç—å –≤ —Å–æ–±—ñ —Ñ–∞–π–ª–∏ css, js —Ä–æ–∑—à–∏—Ä–µ–Ω—å, –∫–∞—Ä—Ç–∏–Ω–æ–∫ —Ç–∞ —ñ–Ω.
static_url_path - –≤—ñ–¥–ø–æ–≤—ñ–¥–∞—î –∑–∞ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è URL —à–ª—è—Ö—É –¥–æ —Å—Ç–∞—Ç–∏—á–Ω–∏—Ö —Ñ–∞–π–ª—ñ–≤ —É –¥–æ–¥–∞—Ç–∫—É.

```
shop = flask.Blueprint(
    name = 'shop',
    import_name = 'shop_page',
    template_folder = 'templates',
    static_folder = "static",
    static_url_path = "/shop/"
)
```

### –ü—ñ–¥'—î–¥–Ω–∞–Ω–Ω—è Blueprint –¥–æ Flask

–î–æ –∑–º—ñ–Ω–Ω–æ—ó-–µ–∫–∑–µ–º–ø–ª—è—Ä—É –∫–ª–∞—Å—É Blueprint –∑–∞—Å—Ç–æ—Å–æ–≤—É—î–º–æ —Ñ—É–Ω–∫—Ü—ñ—é  add_url_rule —ñ –∑–∞–¥–∞–µ–º–æ –ø–∞—Ä–∞–º–µ—Ç—Ä–∏: --rule - –¥–æ–º–µ–Ω–Ω–∏–π —à–ª—è—Ö –¥–æ —Å—Ç–æ—Ä—ñ–Ω–∫–∏, view_func - —Ñ—É–Ω–∫—Ü—ñ—è –ø–æ–∫–∞–∑—É —Å—Ç–æ—Ä—ñ–Ω–∫–∏, —â–æ –≤–∫–ª—é—á–∞—î render_template —Ç–∞ methods - –≤–∏–¥–∏ –∑–∞–ø–∏—Ç—ñ–≤ —Å—Ç–æ—Ä—ñ–Ω–∫–∏ (Get, Post).

```
home_page.home.add_url_rule(
    rule = "/",
    view_func = home_page.render_home_page,
    methods = ["GET", "POST"]
)

```

–î–æ –∑–º—ñ–Ω–Ω–æ—ó-–µ–∫–∑–µ–º–ø–ª—è—Ä—É –∫–ª–∞—Å—É Flask –∑–∞—Å—Ç–æ—Å–æ–≤—É—î–º–æ —Ñ—É–Ω–∫—Ü—ñ—é register_blueprint –∑ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–º blueprint - –µ–∫–∑–µ–º–ø–ª—è—Ä –∫–ª–∞—Å—É Blueprint.

```
shop.register_blueprint(blueprint = home_page.home)
```

### –ó–∞—Å—Ç–æ—Å—É–≤–∞–Ω–Ω—è —Ñ–æ—Ä–º

```
<form method="post" class="form"> 
    <p class="modal-text">CHANGE TEXT:</p>
    
    <input class = "modal-input" id = "select-file" type="" accept="" enctype = ''>
    <button name="change" type="submit" value="button-value" class="name-button">SEND</button>
</form>
```

–£ —Ñ–æ—Ä–º—ñ –º–∞—î –±—É—Ç–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä method –∑—ñ –∑–Ω–∞—á–µ–Ω–Ω—è–º post. –í—Å–µ—Ä–µ–¥–∏–Ω—É –¥–æ–¥–∞—î–º–æ —Ç–µ–≥–∏ input –∞–±–æ textarea (–¥–ª—è –≤–≤–µ–¥–µ–Ω–Ω—è –∑–Ω–∞—á–µ–Ω—å) —Ç–∞ button (–¥–ª—è –Ω–∞–¥—Å–∏–ª–∞–Ω–Ω—è —Ñ–æ—Ä–º–∏). –ó–∞ –±–∞–∂–∞–Ω–Ω—è–º –¥–æ–¥–∞—î–º–æ —Ç–µ–∫—Å—Ç–æ–≤—ñ —Ç–µ–≥–∏, —â–æ–± –ø–æ–∫–∞–∑–∞—Ç–∏, —è–∫–µ —Å–∞–º–µ –∑–Ω–∞—á–µ–Ω–Ω—è –º–∞—î –ø—Ä–∏–π–º–∞—Ç–∏ input.

### –ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è —Å—Ç–æ—Ä—ñ–Ω–∫–∏

–î–ª—è –∫–æ–∂–Ω–æ—ó —Å—Ç–æ—Ä—ñ–Ω–∫–∏ –Ω–∞–ø–∏—Å–∞–Ω–∏–π –æ–∫—Ä–µ–º–∏–π —Ñ–∞–π–ª views.py, —â–æ –≤—ñ–¥–ø–æ–≤—ñ–¥–∞—î –∑–∞ –ø–æ–∫–∞–∑ —Å—Ç–æ—Ä—ñ–Ω–∫–∏.
–£ views —ñ—Å–Ω—É—î —Ñ—É–Ω–∫—Ü—ñ—è _render_, —â–æ –≤–∏–∫–ª–∏–∫–∞—î—Ç—å—Å—è –∫–æ–∂–Ω–æ–≥–æ —Ä–∞–∑—É, —è–∫ —Å—Ç–æ—Ä—ñ–Ω–∫–∞ –æ–Ω–æ–≤–ª—é—î—Ç—å—Å—è.
–¶–µ, –∑–¥–µ–±—ñ–ª—å—à–æ–≥–æ, –Ω–∞–ø–∏—Å–∞–Ω–æ –∑ –º–µ—Ç–æ—é –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ –Ω–∞ —Ñ–æ—Ä–º–∏ —Ç–∞ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –∞–∫—Ç—É–∞–ª—å–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–Ω—Ç—É –∑ –±–∞–∑ –¥–∞–Ω–∏—Ö.

```
import flask
import flask_login
from registration_page.models import User
from project.settings import DB
from flask_login import current_user
from registration_page.views import is_registered

def render_authorization_page():
    if flask.request.method == "POST":
        for user in User.query.filter_by(name = flask.request.form.get("name")):
            if user.password == flask.request.form['password']:
                flask_login.login_user(user)
                return flask.redirect("/")
                    
    return flask.render_template(template_name_or_list = "authorization.html", is_registered = is_registered)
```

–¶–µ —Ñ–∞–π–ª –¥–ª—è —Å—Ç–æ—Ä—ñ–Ω–∫–∏ **–∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—ó**.
–¢—É—Ç –º–∏ –ø–µ—Ä–µ–≤—ñ—Ä—è—î–º–æ, —á–∏ —Å—Ç–æ—Ä—ñ–Ω–∫–∞ –æ—Ç—Ä–∏–º–∞–ª–∞ –∑–∞–ø—Ä–æ—Å post,
—ñ —Ç–æ–¥—ñ –ø–µ—Ä–µ–≤—ñ—Ä—è—î–º–æ –ø—Ä–∞–≤–∏–ª—å–Ω—ñ—Å—Ç—å –≤–≤–µ–¥–µ–Ω–æ–≥–æ –ø–∞—Ä–æ–ª—è. –Ø–∫—â–æ –ø–∞—Ä–æ–ª—å —Å–ø—ñ–≤–ø–≤–∞–≤, —Ç–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á –≤—Ö–æ–¥–∏—Ç—å —É —Å–≤–æ—é —Å–µ—Å—ñ—é.

```
import flask, flask_login
from .models import User
from project.settings import DB
from project.settings import shop

is_registered = False
def render_registration_page():
    global is_registered
    # print("User.query in reg: ", User.query.all())
    print("flask.request.method =", flask.request.method)
    
    if flask.request.method == "POST":
        print("Post")
        if flask.request.form['password1'] == flask.request.form['password2']:   
            users = User( 
                name = flask.request.form['name'],
                email = flask.request.form['email'],
                password = flask.request.form['password1'],
                password_confirmation = flask.request.form["password2"]
            )
            print("12")
            if flask_login.current_user.is_authenticated:
                # print("–í–∏ –≤–∂–µ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω—ñ")
                return "–í–∏ –≤–∂–µ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω—ñ"
            else:
                for user in User.query.filter_by(name = flask.request.form['name']):
                    if user.password == flask.request.form['password1']:
                        flask_login.login_user(user)
                        # return flask.redirect("/")
            try:
                DB.session.add(users)
                DB.session.commit()
                print("user registered")
                is_registered = True
                # return flask.redirect("/")
                
            except:
                return "ERROR"
            else:
                pass
    return flask.render_template(template_name_or_list = "registration.html", is_registered = is_registered)

```

–ù–∞ —Å—Ç–æ—Ä—ñ–Ω—Ü—ñ **—Ä–µ—î—Å—Ç—Ä–∞—Ü—ñ—ó** —Å–ø–µ—Ä—à—É —Å—Ç–≤–æ—Ä–µ–Ω–∞ –∑–º—ñ–Ω–Ω–∞-—Ñ–ª–∞–≥ is_registered, —â–æ –ø–æ—Ç—ñ–º –ø–µ—Ä–µ–¥–∞—î—Ç—å—Å—è –≤ html —Ç–∞ –ø–æ–∫–∞–∑—É—î, —á–∏ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á –∑–∞–π—à–æ–≤ –Ω–∞ —Å–µ—Å—ñ—é, —á–∏ –Ω—ñ.
–í–∂–µ –ø—ñ—Å–ª—è —Ü—å–æ–≥–æ –º–∏ –ø–µ—Ä–µ–≤—ñ—Ä—è—î–º–æ —Å–∞–π—Ç –Ω–∞ –Ω–∞—è–≤–Ω—ñ—Å—Ç—å –≤—ñ–¥–ø—Ä–∞–≤–ª–µ–Ω–æ–≥–æ post-–∑–∞–ø–∏—Ç—É.
–°—Ç–≤–æ—Ä—é—î–º–æ –µ–∫–∑–µ–º–ø–ª—è—Ä –º–æ–¥–µ–ª—ñ –¥–ª—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤ —ñ –∑–∞–ø–∏—Å—É—î–º–æ —É –Ω—å–æ–≥–æ –¥–∞–Ω—ñ, –≤–≤–µ–¥–µ–Ω—ñ —É input —Ñ–æ—Ä–º–∏.
–£ –Ω–∞—Å—Ç—É–ø–Ω—ñ–π —É–º–æ–≤—ñ –º–∏ –ø–µ—Ä–µ–≤—ñ—Ä—è—î–º–æ, —á–∏ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á –≤–∂–µ —É —Å–µ—Å—Å—ñ—ó –π –ø–æ–≤–µ—Ä—Ç–∞—î _"–í–∏ –≤–∂–µ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω—ñ"_, —è–∫—â–æ —É–º–æ–≤–∞ –ø—Ä–∞–≤–¥–∏–≤–∞.
–î–∞–ª—ñ –ø–µ—Ä–µ–≤—ñ—Ä—è—î–º–æ –ø—Ä–∞–≤–∏–ª—å–Ω—ñ—Å—Ç—å –ø–∞—Ä–æ–ª—è –π –æ–Ω–æ–≤–ª—é—î–º–æ –±–∞–∑—É –¥–∞–Ω–∏—Ö.

```
import flask, pandas, os, flask_login
from project.settings import DB
from .models import Product
def render_shop_page():
    # Product.query.delete()

    print("Product.query.all():", Product.query.all)
    # if Product.query.all() == :
    if True:
        print("1")
        path_xlsx = os.path.abspath(__file__  + "/../phones_flask_project.xlsx")
        print("2")
        read_xlsx = pandas.read_excel(
            io = path_xlsx,
            header = None,
            names = ["name", "price", "description", "count", "image", "discount"]
        )

        Product.query.delete()
        print(read_xlsx)
        for row in read_xlsx.iterrows():
            row_data = row[1]
            # print(row_data)
            product = Product(
                name = row_data['name'],
                price = row_data['price'],
                description = row_data['description'],
                count = row_data['count'],
                image = row_data['image'],
                discount = row_data["discount"]
            )
            print("product =", product)
            DB.session.add(product)

        DB.session.commit()

    return flask.render_template(
        template_name_or_list = "shop.html",
        products = Product.query.all(),
        is_authenticated = flask_login.current_user.is_authenticated
    )  

```

–î–ª—è —Å—Ç–æ—Ä—ñ–Ω–∫–∏ **–º–∞–≥–∞–∑–∏–Ω—É**, —Å–ø–æ—á–∞—Ç–∫—É –º–∏ –ø–µ—Ä–µ–≤—ñ—Ä—è—î–º–æ –Ω–∞—è–≤–Ω—ñ—Å—å –ø—Ä–æ–¥—É–∫—Ç—ñ–≤ —É –±–∞–∑—ñ –¥–∞–Ω–∏—Ö, —è–∫—â–æ –≤–æ–Ω–∞ –ø—É—Å—Ç–∞, —Ç–æ –∑–∞–≤–∞–Ω—Ç–∞–∂—É—î–º–æ —Ç–æ–≤–∞—Ä–∏ –∑ —Ç–∞–±–ª–∏—Ü—ñ.

```
import flask, os, flask_login
from shop_page.models import Product
from project.settings import DB
def render_admin_page():
    if flask.request.method == "POST":
        print("flask.request.form.get('change') =", flask.request.form.get("change"))
        try:
            print(flask.request.form.get("del"))
            if flask.request.form.get("change"):
                list_new_value = flask.request.form.get("change").split("^")
                # print("new_value.split[-1] = ",list_new_value[2])
                print("new_value.split('^') = ", list_new_value)
                product = Product.query.get(list_new_value[1])
                print(product)
                if len(list_new_value) == 2:
                    product.image = list_new_value[0]
                elif list_new_value[-1] == "name":
                    product.name = list_new_value[0]
                elif list_new_value[-1] == "price":
                    product.price = list_new_value[0]
                elif list_new_value[-1] == "discount":
                    product.discount = list_new_value[0]
                
                DB.session.commit()
                
                
            elif flask.request.form.get("del") == None:
                print("db new product")
                product = Product(
                    image = flask.request.form["image"],
                    name = flask.request.form["name"],
                    description = flask.request.form["description"],
                    price = flask.request.form["price"],
                    discount = flask.request.form["discount"],
                    count = flask.request.form["count"]
                )
                DB.session.add(product)
                DB.session.commit()

                image = flask.request.files["image"]
                image.save(os.path.abspath(__file__ + f"/../../shop_page/static/images/{product.name}.jpg"))
            else:
                # pass
                product_id = int(flask.request.form["del"])
                product_del = Product.query.get(product_id)
                # print("product_del:", product_del)
                if Product.query.get(product_id):
                    DB.session.delete(product_del)
                    DB.session.commit()
                    os.remove(os.path.abspath(__file__ + f"/../../shop_page/static/images/{product_del.name}.jpg"))

        except Exception as e:
            print(e)
        
    return flask.render_template(template_name_or_list = "admin.html", products = Product.query.all(), is_authenticated = flask_login.current_user.is_authenticated)
```

–î–ª—è **–∞–¥–º—ñ–Ω-—Å—Ç–æ—Ä—ñ–Ω–∫–∏**, –º–∏ –∑–∞–¥–∞—î–º–æ –ø–µ—Ä–µ–≤—ñ—Ä–∫—É –Ω–∞ –Ω–∞—è–≤–Ω—ñ—Å—Ç—å post-–∑–∞–ø—Ä–æ—Å—É –≤—ñ–¥ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ó —Ñ–æ—Ä–º–∏ –∑–º—ñ–Ω—É —Ç–æ–≤–∞—Ä—É.
–ó–∞ —É–º–æ–≤–∏, —â–æ –º–∏ –≤—ñ–¥–ø—Ä–∞–≤–ª—è—î–º–æ —Ñ–æ—Ä–º—É –¥–ª—è –∑–º—ñ–Ω–∏ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—ó –ø—Ä–æ —Ç–æ–≤–∞—Ä, –º–∏ –æ–Ω–æ–≤–ª—é—î–º–æ –±–∞–∑—É –¥–∞–Ω–∏—Ö.
–ù–∞—Å—Ç—É–ø–Ω–∞ —É–º–æ–≤–∞ –≤—ñ–¥–ø–æ–≤—ñ–¥–∞—î –∑–∞ —Ñ–æ—Ä–º—É –¥–æ–¥–∞–≤–∞–Ω–Ω—è –ø—Ä–æ–¥—É–∫—Ç—É.
–Ø–∫—â–æ —É–º–æ–≤–∞ –¥—ñ–π—Å–Ω–∞, —Ç–æ –º–∏ –¥–æ–¥–∞—î–º–æ —Ç–æ–≤–∞—Ä –¥–æ –±–∞–∑–∏.
–û—Å—Ç–∞–Ω–Ω—è —É–º–æ–≤–∞ –≤–∏–¥–∞–ª—è—î —Ç–æ–≤–∞—Ä.

### –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –º–æ–¥–µ–ª–µ–π —É –±–∞–∑—ñ –¥–∞–Ω–∏—Ö 

```
from project.settings import DB
class Product(DB.Model):
    id = DB.Column(DB.Integer, primary_key = True)
    name = DB.Column(DB.String(20), nullable = False)
    price = DB.Column(DB.Integer, nullable = False)
    description = DB.Column(DB.Text, nullable = False)
    count = DB.Column(DB.Integer, nullable = False)
    image = DB.Column(DB.String(100), nullable = False)
    discount = DB.Column(DB.Integer, nullable = False)

    def __repr__(self):
      return f"id - {self.id}; –ù–∞–∑–≤–∞ —Ç–æ–≤–∞—Ä—É - {self.name}"

```

–£ **shop_page** –º–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î–º–æ models –¥–ª—è —Ç–æ–≥–æ, —â–æ–± —Å—Ç–≤–æ—Ä–∏—Ç–∏ –º–æ–¥–µ–ª—å —Ç–∞–±–ª–∏—Ü—ñ —É –±–∞–∑—ñ –¥–∞–Ω–∏—Ö. –î–ª—è –ø–æ—á–∞—Ç–∫—É –º–∏ —Å—Ç–≤–æ—Ä—é—î–º–æ –∫–ª–∞—Å Product, –≤ —è–∫–æ–º—É –∑–∞–¥–∞—î–∏–æ –ø–∞—Ä–∞–º–µ—Ç—Ä–∏ –¥–ª—è –Ω—å–æ–≥–æ: id, name, price, description, count, image, discount. –î–∞–ª—ñ –¥–æ —Ü–∏—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä—ñ–≤ –º–∏ –∑–∞–¥–∞—î–º–æ –æ–±–º–µ–∂–µ–Ω–Ω—è –≤ –∫—ñ–ª—å–∫–æ—Å—Ç—ñ —Å–∏–º–≤–æ–ª—ñ–≤ –ø—Ä–∏ –≤–≤–µ–¥–µ–Ω–Ω—ñ. –£ —Ç–∞–±–ª–∏—Ü—ñ –∂ —Ü—ñ –ø–∞—Ä–∞–º–µ—Ç—Ä–∏ –º–∞—é—Ç—å –≤–∏–≥–ª—è–¥ —Å—Ç–æ–≤–ø—Ü—ñ–≤.

```
from project.settings import DB
from flask_login import UserMixin
class User(DB.Model, UserMixin):
    id = DB.Column(DB.Integer, primary_key = True)
    name = DB.Column(DB.String(30), nullable = False)
    email = DB.Column(DB.String(70), nullable = False)
    password = DB.Column(DB.String(30), nullable = False)
    password_confirmation = DB.Column(DB.String(30), nullable = False)

    def __repr__(self):
      return f"id –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ - {self.id}; –Ü–º'—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ - {self.name}; Email –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ {self.email}; –ü–∞—Ä–æ–ª—å –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ {self.email}"

```

–£ **registration_page** –º–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î–º–æ models –¥–ª—è —Ç–æ–≥–æ, —â–æ–± —Å—Ç–≤–æ—Ä—é–≤–∞—Ç–∏ —Ç–∞–±–ª–∏—Ü—é –¥–ª—è —É—Å—ñ—Ö –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤, —â–æ —Ä–µ—î—Å—Ç—Ä—É—é—Ç—å—Å—è. –î–ª—è –ø–æ—á–∞—Ç–∫—É –º–∏ —Å—Ç–≤–æ—Ä—é—î–º–æ –∫–ª–∞—Å User, –≤ —è–∫–æ–º—É –∑–∞–¥–∞—î–º–æ –ø–∞—Ä–∞–º–µ—Ç—Ä–∏ –¥–ª—è –Ω—å–æ–≥–æ: id, name, email, password, password_confirmation. –£ —Ç–∞–±–ª–∏—Ü—ñ —Ü—ñ –ø–∞—Ä–∞–º–µ—Ç—Ä–∏ –º–∞—é—Ç—å –≤–∏–≥–ª—è–¥ —Å—Ç–æ–≤–ø—Ü—ñ–≤.


### –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è –±–∞–∑–∏ –¥–∞–Ω–∏—Ö –ø—Ä–æ–µ–∫—Ç–∞, –ø—Ä–æ–≤–µ–¥–µ–Ω–Ω—è –º—ñ–≥—Ä–∞—Ü—ñ–π
    flask --app settings db init
    flask --app settings db migrate
    flask --app settings db upgrade
    
    
### –ë–∞–∑–∞ –¥–∞–Ω–∏—Ö
**–ë–∞–∑–∞ –¥–∞–Ω–∏—Ö** - —Ü–µ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞, —è–∫–∞ –ø—Ä–∏–∑–Ω–∞—á–µ–Ω–∞ –¥–ª—è –∑–±–µ—Ä—ñ–≥–∞–Ω–Ω—è, –∑–º—ñ–Ω–∏ —Ç–∞ –æ–±—Ä–æ–±–∫–∏ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—ó. 

**SQLite3** - —Ü–µ –±—ñ–±–ª—ñ–æ—Ç–µ–∫–∞, —è–∫–∞ –∑—Ä—É—á–Ω–æ –Ω–∞–ø–∏—Å–∞–Ω–∞.
**Id** —î —î–¥–∏–Ω–∏–º —ñ –Ω–µ–ø–æ–≤—Ç–æ—Ä–Ω–∏–º, —É –∫–æ–∂–Ω–æ–≥–æ id —Å–≤—ñ–π —É–Ω—ñ–∫–∞–ª—å–Ω–∏–π –∫–ª—é—á. –û—Å–∫—ñ–ª—å–∫–∏ –∫–æ–∂–µ–Ω id —î —É–Ω—ñ–∫–∞–ª—å–Ω–∏–º - —Ü–µ –Ω–∞–π–≤—ñ—Ä–Ω—ñ—à–∏–π —Å–ø–æ—Å—ñ–± –∑–Ω–∞–π—Ç–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–∏–π —Ä—è–¥–æ–∫ —É —Ç–∞–±–ª–∏—Ü—ñ. –Ø–∫—â–æ –Ω–∞–∑–≤–∞ —Ç–∞ —ñ–Ω—à—ñ —Å—Ç–æ–≤–ø—Ü—ñ –º–æ–∂—É—Ç—å –±—É—Ç–∏ —ñ–¥–µ–Ω—Ç–∏—á–Ω–∏–º–∏, —Ç–æ —á–µ—Ä–µ–∑ –Ω–∏—Ö –ø–µ—Ä–µ–≤—ñ—Ä—è—Ç–∏ –º–∏ –Ω–µ –º–æ–∂–µ–º–æ



### Java Script

–£ **buttonsCookies** –º–∏ –¥–æ–±–∞–≤–ª—è—î–º–æ —ñ –≤–∏–¥–∞–ª—è—î–º–æ —Ç–æ–≤–∞—Ä –ø—Ä–∏ –Ω–∞—Ç–∏—Å–Ω–∏–Ω—ñ –Ω–∞ –∫–Ω–æ–ø–∫—É. 

```
const listButtonsMinus = document.querySelectorAll(".minus")

for (let count = 0; count < listButtonsMinus.length; count++){
    let button = listButtonsMinus[count]
    button.addEventListener(
        type = "click",
        listener = function(event) {
            let listIdProducts = document.cookie.split("=")[1].split(" ")

            for(let index = 0; index < listIdProducts.length; index++){
                if (listIdProducts[index] == button.id){
                    if (button.nextElementSibling.textContent > 1){
                        listIdProducts.splice(index, 1)
                        button.nextElementSibling.textContent = +button.nextElementSibling.textContent - 1
                        console.log(listIdProducts)

                        break
                    }
                }
            }
            document.cookie = `products=${listIdProducts.join(" ")}; path = /`

        }
    )
}

const listButtonPlus = document.querySelectorAll(".plus")

for(let count = 0; count < listButtonPlus.length; count++){
    // console.log(listButtonPlus)
    let button = listButtonPlus[count]
    button.addEventListener(
        type = "click",
        listener = function(event) {
            if (document.cookie == ""){
                document.cookie = `products = ${button.id}`
                button.previousElementSibling.textContent = +button.previousElementSibling.textContent + 1
                // console.log("1", button.id)
            }else{
                // console.log("2", button.id)
                let currentProduct = document.cookie.split("=")[1]
                document.cookie = `products = ${currentProduct} ${button.id}; path = /`
                button.previousElementSibling.textContent = +button.previousElementSibling.textContent + 1
                
            }
        }
    )
}


let listDeleteProducts = document.querySelectorAll(".delete")

for (let id = 0; id < listDeleteProducts.length; id++){
    console.log(listDeleteProducts)
    let button = listDeleteProducts[id]
    button.addEventListener(
        type = "click",
        listener = function(event){
           if (document.cookie != "") {
                // let buttonsID = button.id.split("-")[1]
                // console.log(button.id)

                let listIDProducts = document.cookie.split("=")[1].split(" ")
                let lenList = listIDProducts.length

                for (let a = 0; a < lenList; a++) {
                    for (let c = 0; c < lenList; c++) {
                        if (listIDProducts[c] === button.id) {
                            // console.log(c)
                            // console.log(lenList)
                            listIDProducts.splice(c, 1)
                            console.log(listIDProducts)
                        }
                    }
                }   
                // console.log(document.querySelector(`.delete`))
                console.log(document.getElementById(`${button.id}`))
                // console.log(document.querySelector(`.products`))
                document.getElementById(button.id).remove()
                // document.querySelector(".products").remove()
                // document.cookie = `products=${listIdProducts.join(" ")}; path = /`
                if (listIDProducts.length >= 0) {
                    // console.log(listIDProducts)
                    document.cookie = `products = ${listIDProducts.join(' ')}; path = /` 
                    // document.cookie = `products = ; path = /` 
                }
                if (document.cookie.split('=')[1] == ''){
                    let p = document.createElement("p")
                    p.textContent = "–ö–æ—Ä–∑–∏–Ω–∞ –ø–æ—Ä–æ–∂–Ω—èüò¢"
                    document.body.append(p)
                    document.querySelector(".order").remove()
                }
            }
        }
    )
}

```

–£ **productInfo** —Ñ—É–Ω–∫—Ü—ñ—è –≤–∏–∫–ª–∏–∫–∞—î—Ç—Å—è –∫–æ–∂–Ω–æ–≥–æ —Ä–∞–∑—É, —è–∫ —Å—Ç–æ—Ä—ñ–Ω–∫–∞ –æ–Ω–æ–≤–ª—é—î—Ç—å—Å—è. 
–í–æ–Ω–∞ –æ–±—Ä–æ–±–ª—é—î –∫—É–∫—ñ-—Ñ–∞–π–ª–∏ —Ç–∞ –≤–∏–≤–æ–¥–∏—Ç—å –Ω–∞ –µ–∫—Ä–∞–Ω —É—Å—ñ –æ–±—Ä–∞–Ω—ñ —Ç–æ–≤–∞—Ä–∏ —Ç–∞ —ó—Ö–Ω—é –∫—ñ–ª—å–∫—ñ—Å—Ç—å.

```
document.addEventListener(
    type = "DOMContentLoaded",
    listener = function(event){
        let listCountProducts = document.querySelectorAll('.products')
        let productCountId = document.getElementById('count-product')
        // let totalPriceId = document.getElementById('total-price')
        productCountId.textContent = listCountProducts.length
        // let listNumberPrices = []
        let totalPrice = 0
        let totalDiscount = 0
        
        // let listCountCount = []

        // let product = products[productPrice]
        let listProductPrices = document.querySelectorAll(".product-price")
        for(let productPrice = 0; productPrice < listProductPrices.length; productPrice++ ){
            console.log(listProductPrices[productPrice])
            // console.log("innerText =", productPrice.textContent)

            let listFullPrice = document.querySelectorAll(".invisible")
            for (fullPrice of listFullPrice){
                console.log("fullPrice.innerText =", fullPrice.textContent, "; Number(listProductPrices[productPrice].innerText.split()[0] =", Number(listProductPrices[productPrice].innerText.split(" ")[0]))
                let onlyNumberPrice = Number(fullPrice.textContent).toFixed(2)
                let elementId = listProductPrices[productPrice].id
                console.log("id =", elementId, document.getElementById(`quantity ${elementId}`).textContent)

                // listNumberPrices.push(onlyNumberPrice * document.getElementById(`quantity ${elementId}`).textContent)
                let quantity = Number(document.getElementById(`quantity ${elementId}`).textContent)
                let totalPriceResult = onlyNumberPrice * quantity

                // listNumberPrices.push(totalPriceResult.toFixed(2))
                totalPrice += totalPriceResult
                if (fullPrice.id == listProductPrices[productPrice].id){
                    discount = Number(fullPrice.textContent) - Number(listProductPrices[productPrice].innerText.split(" ")[0])
                    console.log("discount =", discount)
                    for (let count = 0; count < quantity; count++) {
                        totalDiscount += discount
                    }
                }
                
            }
            console.log(totalDiscount)
            document.getElementById("total-discount").innerText = `${totalDiscount.toFixed(2)} –≥—Ä–Ω`
            
        }
        console.log("total price:", totalPrice)
        document.getElementById("total-price").textContent = `${totalPrice.toFixed(2)} `
        

        let totalTotalPrice = (totalPrice) - totalDiscount
        document.querySelector("#total-amount").textContent = `${totalTotalPrice.toFixed(2)} –≥—Ä–Ω`
    }
)

let listPrice = document.querySelectorAll(".product-price")

for (let price of listPrice){
    console.log("price =", price)
    price.innerText = `${Number(price.innerText.split(" ")[0]).toFixed(2)} –≥—Ä–Ω`
    console.log("price.innerText =", price.innerText)
}

let checkoutButton = document.querySelector(".checkout")


checkoutButton.addEventListener(
    type = "click",
    listener = function(event){
        event.preventDefault()
        document.querySelector(".placing").style.display = "flex"
        console.log("aaskasjinaso")
    }
)

let sendButton = document.createElement(".send-product")

sendButton.addEventListener(
    type = "click",
    listener = function(event){
        let all = document.querySelectorAll()
        all.remove()
        console.log("a")

        let h2 = document.createElement("h2")
        h2.classList.add("waiting-text")
        document.body.appendChild(h2)
    }
)

```

–£ **admin** –º–∏ —Å—Ç–≤–æ—Ä—é—î–º–æ –¥—ñ—ó, —â–æ –≤—ñ–¥—Ç–≤–æ—Ä—é—î—Ç—å—Å—è –ø—Ä–∏ –Ω–∞—Ç–∏—Å–∫–∞–Ω–Ω—ñ –Ω–∞ –∫–Ω–æ–ø–∫–∏ –∑–º—ñ–Ω–∏ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—ó –ø—Ä–æ —Ç–æ–≤–∞—Ä —Ç–∞ –ø–æ—è–≤–∞ —Ñ–æ—Ä–º–∏ –¥–ª—è –¥–æ–¥–∞–≤–∞–Ω–Ω—è –Ω–æ–≤–∏—Ö —Ç–æ–≤–∞—Ä—ñ–≤ —É –±–∞–∑—É.

```
let listPencilName = document.querySelectorAll(".pencil-name")
let listPencilDiscount = document.querySelectorAll(".pencil-discount")
let listPencilPrice = document.querySelectorAll(".pencil-price")
let listPencilDescription = document.querySelectorAll(".pencil-description")
let listPencilImage= document.querySelectorAll(".pencil-image")
let myForm = document.querySelector(".form")

function addListButton(classList, element) {
  for (let i = 0; i < classList.length; i++) {
      let currentElement = classList[i]
      currentElement.addEventListener(
        type = "click",
        listener = function(event){
          ChangeButton(event, element, i)
        } 
      )
  }          
}

addListButton(listPencilName, 'name')
addListButton(listPencilDiscount, 'discount')
addListButton(listPencilDescription, 'decription')
addListButton(listPencilPrice, 'price')

function ChangeButton(event, element, index){
  let listButtonPencil = []
  if (element == 'name'){
    listButtonPencil = listPencilName
  }
  else if (element == 'discount'){
    listButtonPencil = listPencilDiscount
  }
  else if (element == 'description'){
    listButtonPencil = listPencilDescription
  }
  else if (element == 'price'){
    listButtonPencil = listPencilPrice
  }

  idPencil = listButtonPencil[index].id
  console.log(listButtonPencil[index].id)
  let input = document.querySelector(".modal-input")
  input.type = 'text'
  input.id = idPencil
  console.log(input)
  console.log(myForm)
  // myForm.append(input)
  document.querySelector('.modal-window').style.display = 'flex'
  let button = document.querySelector(".name-button")
  button.id = idPencil
  button.style.display = "flex"
  button.addEventListener(
      type = "click",
      listener = function(event) {
          let newValue = input.value
          let elementValue = document.getElementById(`${element}-${idPencil}`)
          console.log(elementValue, `${element}-${idPencil}`)
          button.value = newValue + "^" + button.id + "^" + element
          elementValue.textContent = newValue
          console.log(newValue)
          input.remove()
          // button.style.display = none 
      }
  )
}

for (let i = 0; i < listPencilImage.length; i++) {
  let pencilImage = listPencilImage[i]
  pencilImage.addEventListener(
    type = 'click', 
    listener = (event) =>{
      let id = pencilImage.id
      console.log(id)
      let input = document.querySelector(".modal-input")
      input.accept = 'image/*'
      input.type = "file"
      input.enctype = 'multipart/form-data'
      input.id = id


      document.querySelector(".modal-text").textContent = "CHANGE IMAGE"
      document.querySelector('.modal-window').style.display = 'flex'
      button = document.querySelector(".name-button")
      button.addEventListener(
        type = "click",
        listener = (event)=>{
          let newValue = input.value.split(/\\/g)[input.value.split(/\\/g).length - 1]
          button.value = newValue + "^" + id
        }
      )
    }
  )
}

let addProductButton = document.querySelector(".plus")

addProductButton.addEventListener(
  type = "click",
  listener = (event) =>{
    console.log("add new product")
    let addProductForm = document.querySelector(".modal-form")
    addProductForm.style.display = "flex"
  }
)

```


–£ **authoritzation.js** –ú–∏ —Ä–æ–±–∏–º–æ —Ç–∞–∫ —â–æ–± —Ü–µ–π –∫–æ–¥ –ø–µ—Ä–µ–≤—ñ—Ä—è–≤ —á–∏ –Ω–∞—Ç–∏—Å–Ω—É—Ç–∞ –∫–Ω–æ–ø–∫–∞ SEND –ø–µ—Ä—à –Ω—ñ–∂ –ø–æ–∫–∞–∑—É–≤–∞—Ç–∏ –º–æ–¥–∞–ª—å–Ω–µ –≤—ñ–∫–Ω–æ.

```
let buttonSend = document.querySelector(".authorization_submit")
let regForm = document.querySelector("#authorization_content")

buttonSend.addEventListener(
  type = "click",
  listener = function(event){
    let inputsFilled = true
    // event.preventDefault()
    console.log("button send.clicked")
    for (let index = 0; index < regForm.elements.length; index++) { 
      let element = regForm.elements[index]; 
      if (!element.value){
        inputsFilled = false
       }
      if(inputsFilled){
        document.querySelector(".modal-window").style.display = "flex"
      }
    // event.preventDefault()
    } 
  }
)
```

```
let buttonSubmit = document.querySelector(".registration_submit")
let regForm = document.querySelector("#registration_content")
buttonSubmit.addEventListener(
  type = "click",
  listener = function(event){
    let inputsFilled = true
    // event.preventDefault()
    for (let index = 0; index < regForm.elements.length; index++) { 
      let element = regForm.elements[index]; 
      if (!element.value){
        inputsFilled = false
       }
      if(inputsFilled){
        document.querySelector(".modal-window").style.display = "flex"
      }
    } 
  }
)

```



# Internet Shop

## List of team members

>- Boiarkina Oryna (TEAMLEAD) - [view on GitHub](https://github.com/BoiarkinaOryna) 
>- Filynska Daria - [view on GitHub](https://github.com/DariaFilinskaya)
>- Homelska Viktoria - [view on GitHub](https://github.com/Viktoria0228)
>- Burlakova Alisa - [view on GitHub](https://github.com/archalice)
>- Pilat Viktor - [view on GitHub](https://github.com/VictorPilat)


## What our project does

#### Our project is an online store with an integrated Telegram bot, designed to provide information about products and user management, including adding and removing buyers, as well as providing administrator rights.


Our project was created for _easy_ access to goods with an _understandable_ interface and the ability to buy selected products. The site also has an admin panel that makes _editing, adding and removing_ products much easier.

For us, this project is of great importance, as for beginner programmers, because we have combined various technologies for its implementation. Such as _Flask, GitHub, SQLite3, pandas_, telebot, HTML, CSS, and Javascript.


### To start the project, you need to download:

- **Flask** - creation of site structure
- **pandas** - loading products from the table
- **Flask-Login** - adding authentication to the site
- **Flask-Migrate** - binding the database to the project
- **Flask-SQLALchemy** - works with sql3 database
- **Flask-Mail** - sending email
- **telebot** - creation of a telegram bot
- **Jinja2** - web application templating
- **requests** - work with http requests


#### To run the project remotely, use the [pythonanywhere](https://www.pythonanywhere.com) server for Flask and Django projects

## The project contains the following applications:

- **Home** - home page
- **Registration** - registration page
- **Authorization** - account login page
- **Shop** - product catalog
- **Cart** - list of selected products
- **Contacts** - list of seller contacts
- **Admin** - for editing products


### Creating a project template

It is necessary to create an element of the Flask class of the flask library and set the necessary parameters to it: 
import_name - the name of the file in which the variable was created, template-folder - the path to the templates folder, and instance-path - the absolute path to the folder in which this file is located.

```
shop = flask.Flask(
    import_name = "project",
    template_folder = "templates",
    instance_path = os.path.abspath(__file__ + "/..")
)
```


### Application of forms

```
<form method="post" class="form"> 
    <p class="modal-text">CHANGE TEXT:</p>
    
    <input class = "modal-input" id = "select-file" type="" accept="" enctype = ''>
    <button name="change" type="submit" value="button-value" class="name-button">SEND</button>
</form>
```

The form must have a method parameter with the value post. Inside, we add the input or textarea (for entering values) and button (for sending the form) tags. Optionally, we add text tags to show exactly what value input should take.

### Loading page

A separate views.py file is written for each page, which is responsible for displaying the page.
In views there is a _render_ function that is called every time the page is refreshed.
It is mostly written to respond to forms and download relevant content from databases.

```
import flask, pandas, os, flask_login
from project.settings import DB
from .models import Product
def render_shop_page():
    # Product.query.delete()

    print("Product.query.all():", Product.query.all)
    # if Product.query.all() == :
    if True:
        print("1")
        path_xlsx = os.path.abspath(__file__  + "/../phones_flask_project.xlsx")
        print("2")
        read_xlsx = pandas.read_excel(
            io = path_xlsx,
            header = None,
            names = ["name", "price", "description", "count", "image", "discount"]
        )

        Product.query.delete()
        print(read_xlsx)
        for row in read_xlsx.iterrows():
            row_data = row[1]
            # print(row_data)
            product = Product(
                name = row_data['name'],
                price = row_data['price'],
                description = row_data['description'],
                count = row_data['count'],
                image = row_data['image'],
                discount = row_data["discount"]
            )
            print("product =", product)
            DB.session.add(product)

        DB.session.commit()

    return flask.render_template(
        template_name_or_list = "shop.html",
        products = Product.query.all(),
        is_authenticated = flask_login.current_user.is_authenticated
    )  

```

For the **shop** page, first we check the available products in the database, if it is empty, then we load the products from the table.

```
import flask, os, flask_login
from shop_page.models import Product
from project.settings import DB
def render_admin_page():
    if flask.request.method == "POST":
        print("flask.request.form.get('change') =", flask.request.form.get("change"))
        try:
            print(flask.request.form.get("del"))
            if flask.request.form.get("change"):
                list_new_value = flask.request.form.get("change").split("^")
                # print("new_value.split[-1] = ",list_new_value[2])
                print("new_value.split('^') = ", list_new_value)
                product = Product.query.get(list_new_value[1])
                print(product)
                if len(list_new_value) == 2:
                    product.image = list_new_value[0]
                elif list_new_value[-1] == "name":
                    product.name = list_new_value[0]
                elif list_new_value[-1] == "price":
                    product.price = list_new_value[0]
                elif list_new_value[-1] == "discount":
                    product.discount = list_new_value[0]
                
                DB.session.commit()
                
                
            elif flask.request.form.get("del") == None:
                print("db new product")
                product = Product(
                    image = flask.request.form["image"],
                    name = flask.request.form["name"],
                    description = flask.request.form["description"],
                    price = flask.request.form["price"],
                    discount = flask.request.form["discount"],
                    count = flask.request.form["count"]
                )
                DB.session.add(product)
                DB.session.commit()

                image = flask.request.files["image"]
                image.save(os.path.abspath(__file__ + f"/../../shop_page/static/images/{product.name}.jpg"))
            else:
                # pass
                product_id = int(flask.request.form["del"])
                product_del = Product.query.get(product_id)
                # print("product_del:", product_del)
                if Product.query.get(product_id):
                    DB.session.delete(product_del)
                    DB.session.commit()
                    os.remove(os.path.abspath(__file__ + f"/../../shop_page/static/images/{product_del.name}.jpg"))

        except Exception as e:
            print(e)
        
    return flask.render_template(template_name_or_list = "admin.html", products = Product.query.all(), is_authenticated = flask_login.current_user.is_authenticated)
```


For the **admin page**, we set a check for the presence of a post-request from a specific product change form.
Provided that we submit a form to change product information, we update the database.
The following condition is responsible for the product addition form.
If the condition is valid, then we add the product to the database.
The last condition removes the item.


### Creation of models in the database 

```
from project.settings import DB
class Product(DB.Model):
    id = DB.Column(DB.Integer, primary_key = True)
    name = DB.Column(DB.String(20), nullable = False)
    price = DB.Column(DB.Integer, nullable = False)
    description = DB.Column(DB.Text, nullable = False)
    count = DB.Column(DB.Integer, nullable = False)
    image = DB.Column(DB.String(100), nullable = False)
    discount = DB.Column(DB.Integer, nullable = False)

    def __repr__(self):
      return f"id - {self.id}; Product name - {self.name}"

```

In **shop_page** we use models to create a table model in the database. To begin with, we create a Product class, in which we set parameters for it: id, name, price, description, count, image, discount. Next, to these parameters, we set a limit on the number of characters when entering. In the table, these parameters have the form of columns.

```
from project.settings import DB
from flask_login import UserMixin
class User(DB.Model, UserMixin):
    id = DB.Column(DB.Integer, primary_key = True)
    name = DB.Column(DB.String(30), nullable = False)
    email = DB.Column(DB.String(70), nullable = False)
    password = DB.Column(DB.String(30), nullable = False)
    password_confirmation = DB.Column(DB.String(30), nullable = False)

    def __repr__(self):
      return f"user id - {self.id}; User name - {self.name}; User email {self.email}; User password {self.email}"

```


In the **registration_page** we use models to create a table for all users registering. To begin with, we create the User class, in which we set the parameters for it: id, name, email, password, password_confirmation. In the table, these parameters have the form of columns.


### Initialization of the project database, migrations
    flask --app settings db init
    flask --app settings db migrate
    flask --app settings db upgrade
    
    
### Database
**Database** is a structure designed to store, change and process information. 

**SQLite3** is a library that is conveniently written.
**Id** is unique and unique, each id has its own unique key. Since each id is unique, this is the most reliable way to find a specific row in the table. If the name and other columns can be identical, then we cannot check through them.A


### Java Script

In **buttonsCookies** we add and remove a product when a button is pressed. 

```
const listButtonsMinus = document.querySelectorAll(".minus")

for (let count = 0; count < listButtonsMinus.length; count++){
    let button = listButtonsMinus[count]
    button.addEventListener(
        type = "click",
        listener = function(event) {
            let listIdProducts = document.cookie.split("=")[1].split(" ")

            for(let index = 0; index < listIdProducts.length; index++){
                if (listIdProducts[index] == button.id){
                    if (button.nextElementSibling.textContent > 1){
                        listIdProducts.splice(index, 1)
                        button.nextElementSibling.textContent = +button.nextElementSibling.textContent - 1
                        console.log(listIdProducts)

                        break
                    }
                }
            }
            document.cookie = `products=${listIdProducts.join(" ")}; path = /`

        }
    )
}

const listButtonPlus = document.querySelectorAll(".plus")

for(let count = 0; count < listButtonPlus.length; count++){
    // console.log(listButtonPlus)
    let button = listButtonPlus[count]
    button.addEventListener(
        type = "click",
        listener = function(event) {
            if (document.cookie == ""){
                document.cookie = `products = ${button.id}`
                button.previousElementSibling.textContent = +button.previousElementSibling.textContent + 1
                // console.log("1", button.id)
            }else{
                // console.log("2", button.id)
                let currentProduct = document.cookie.split("=")[1]
                document.cookie = `products = ${currentProduct} ${button.id}; path = /`
                button.previousElementSibling.textContent = +button.previousElementSibling.textContent + 1
                
            }
        }
    )
}


let listDeleteProducts = document.querySelectorAll(".delete")

for (let id = 0; id < listDeleteProducts.length; id++){
    console.log(listDeleteProducts)
    let button = listDeleteProducts[id]
    button.addEventListener(
        type = "click",
        listener = function(event){
           if (document.cookie != "") {
                // let buttonsID = button.id.split("-")[1]
                // console.log(button.id)

                let listIDProducts = document.cookie.split("=")[1].split(" ")
                let lenList = listIDProducts.length

                for (let a = 0; a < lenList; a++) {
                    for (let c = 0; c < lenList; c++) {
                        if (listIDProducts[c] === button.id) {
                            // console.log(c)
                            // console.log(lenList)
                            listIDProducts.splice(c, 1)
                            console.log(listIDProducts)
                        }
                    }
                }   
                // console.log(document.querySelector(`.delete`))
                console.log(document.getElementById(`${button.id}`))
                // console.log(document.querySelector(`.products`))
                document.getElementById(button.id).remove()
                // document.querySelector(".products").remove()
                // document.cookie = `products=${listIdProducts.join(" ")}; path = /`
                if (listIDProducts.length >= 0) {
                    // console.log(listIDProducts)
                    document.cookie = `products = ${listIDProducts.join(' ')}; path = /` 
                    // document.cookie = `products = ; path = /` 
                }
                if (document.cookie.split('=')[1] == ''){
                    let p = document.createElement("p")
                    p.textContent = "–ö–æ—Ä–∑–∏–Ω–∞ –ø–æ—Ä–æ–∂–Ω—èüò¢"
                    document.body.append(p)
                    document.querySelector(".order").remove()
                }
            }
        }
    )
}

```




```
document.addEventListener(
    type = "DOMContentLoaded",
    listener = function(event){
        let listCountProducts = document.querySelectorAll('.products')
        let productCountId = document.getElementById('count-product')
        // let totalPriceId = document.getElementById('total-price')
        productCountId.textContent = listCountProducts.length
        // let listNumberPrices = []
        let totalPrice = 0
        let totalDiscount = 0
        
        // let listCountCount = []

        // let product = products[productPrice]
        let listProductPrices = document.querySelectorAll(".product-price")
        for(let productPrice = 0; productPrice < listProductPrices.length; productPrice++ ){
            console.log(listProductPrices[productPrice])
            // console.log("innerText =", productPrice.textContent)

            let listFullPrice = document.querySelectorAll(".invisible")
            for (fullPrice of listFullPrice){
                console.log("fullPrice.innerText =", fullPrice.textContent, "; Number)(listProductPrices[productPrice].innerText.split()[0] =", Number(listProductPrices[productPrice].innerText.split(" ")[0]))
                let onlyNumberPrice = Number(fullPrice.textContent).toFixed(2)
                let elementId = listProductPrices[productPrice].id
                console.log("id =", elementId, document.getElementById(`quantity ${elementId}`).textContent)

                // listNumberPrices.push(onlyNumberPrice * document.getElementById(`quantity ${elementId}`).textContent)
                let quantity = Number(document.getElementById(`quantity ${elementId}`).textContent)
                let totalPriceResult = onlyNumberPrice * quantity

                // listNumberPrices.push(totalPriceResult.toFixed(2))
                totalPrice += totalPriceResult
                if (fullPrice.id == listProductPrices[productPrice].id){
                    discount = Number(fullPrice.textContent) - Number(listProductPrices[productPrice].innerText.split(" ")[0])
                    console.log("discount =", discount)
                    for (let count = 0; count < quantity; count++) {
                        totalDiscount += discount
                    }
                }
                
            }
            console.log(totalDiscount)
            document.getElementById("total-discount").innerText = `${totalDiscount.toFixed(2)} –≥—Ä–Ω`
            
        }
        console.log("total price:", totalPrice)
        document.getElementById("total-price").textContent = `${totalPrice.toFixed(2)} `
        

        let totalTotalPrice = (totalPrice) - totalDiscount
        document.querySelector("#total-amount").textContent = `${totalTotalPrice.toFixed(2)} –≥—Ä–Ω`
    }
)

let listPrice = document.querySelectorAll(".product-price")

for (let price of listPrice){
    console.log("price =", price)
    price.innerText = `${Number(price.innerText.split(" ")[0]).toFixed(2)} –≥—Ä–Ω`
    console.log("price.innerText =", price.innerText)
}

let checkoutButton = document.querySelector(".checkout")


checkoutButton.addEventListener(
    type = "click",
    listener = function(event){
        event.preventDefault()
        document.querySelector(".placing").style.display = "flex"
        console.log("aaskasjinaso")
    }
)

let sendButton = document.createElement(".send-product")

sendButton.addEventListener(
    type = "click",
    listener = function(event){
        let all = document.querySelectorAll()
        all.remove()
        console.log("a")

        let h2 = document.createElement("h2")
        h2.classList.add("waiting-text")
        document.body.appendChild(h2)
    }
)

```



In **admin**, we create actions that are played when clicking on the buttons to change product information and the appearance of a form for adding new products to the database.

```
let listPencilName = document.querySelectorAll(".pencil-name")
let listPencilDiscount = document.querySelectorAll(".pencil-discount")
let listPencilPrice = document.querySelectorAll(".pencil-price")
let listPencilDescription = document.querySelectorAll(".pencil-description")
let listPencilImage= document.querySelectorAll(".pencil-image")
let myForm = document.querySelector(".form")

function addListButton(classList, element) {
  for (let i = 0; i < classList.length; i++) {
      let currentElement = classList[i]
      currentElement.addEventListener(
        type = "click",
        listener = function(event){
          ChangeButton(event, element, i)
        } 
      )
  }          
}

addListButton(listPencilName, 'name')
addListButton(listPencilDiscount, 'discount')
addListButton(listPencilDescription, 'decription')
addListButton(listPencilPrice, 'price')

function ChangeButton(event, element, index){
  let listButtonPencil = []
  if (element == 'name'){
    listButtonPencil = listPencilName
  }
  else if (element == 'discount'){
    listButtonPencil = listPencilDiscount
  }
  else if (element == 'description'){
    listButtonPencil = listPencilDescription
  }
  else if (element == 'price'){
    listButtonPencil = listPencilPrice
  }

  idPencil = listButtonPencil[index].id
  console.log(listButtonPencil[index].id)
  let input = document.querySelector(".modal-input")
  input.type = 'text'
  input.id = idPencil
  console.log(input)
  console.log(myForm)
  // myForm.append(input)
  document.querySelector('.modal-window').style.display = 'flex'
  let button = document.querySelector(".name-button")
  button.id = idPencil
  button.style.display = "flex"
  button.addEventListener(
      type = "click",
      listener = function(event) {
          let newValue = input.value
          let elementValue = document.getElementById(`${element}-${idPencil}`)
          console.log(elementValue, `${element}-${idPencil}`)
          button.value = newValue + "^" + button.id + "^" + element
          elementValue.textContent = newValue
          console.log(newValue)
          input.remove()
          // button.style.display = none 
      }
  )
}

for (let i = 0; i < listPencilImage.length; i++) {
  let pencilImage = listPencilImage[i]
  pencilImage.addEventListener(
    type = 'click', 
    listener = (event) =>{
      let id = pencilImage.id
      console.log(id)
      let input = document.querySelector(".modal-input")
      input.accept = 'image/*'
      input.type = "file"
      input.enctype = 'multipart/form-data'
      input.id = id


      document.querySelector(".modal-text").textContent = "CHANGE IMAGE"
      document.querySelector('.modal-window').style.display = 'flex'
      button = document.querySelector(".name-button")
      button.addEventListener(
        type = "click",
        listener = (event)=>{
          let newValue = input.value.split(/\\/g)[input.value.split(/\\/g).length - 1]
          button.value = newValue + "^" + id
        }
      )
    }
  )
}

let addProductButton = document.querySelector(".plus")

addProductButton.addEventListener(
  type = "click",
  listener = (event) =>{
    console.log("add new product")
    let addProductForm = document.querySelector(".modal-form")
    addProductForm.style.display = "flex"
  }
)

```

In **authoritzation.js** We make this code check if the SEND button is pressed before showing the modal window.

```
let buttonSend = document.querySelector(".authorization_submit")
let regForm = document.querySelector("#authorization_content")

buttonSend.addEventListener(
  type = "click",
  listener = function(event){
    let inputsFilled = true
    // event.preventDefault()
    console.log("button send.clicked")
    for (let index = 0; index < regForm.elements.length; index++) { 
      let element = regForm.elements[index]; 
      if (!element.value){
        inputsFilled = false
       }
      if(inputsFilled){
        document.querySelector(".modal-window").style.display = "flex"
      }
    // event.preventDefault()
    } 
  }
)
```

```
let buttonSubmit = document.querySelector(".registration_submit")
let regForm = document.querySelector("#registration_content")
buttonSubmit.addEventListener(
  type = "click",
  listener = function(event){
    let inputsFilled = true
    // event.preventDefault()
    for (let index = 0; index < regForm.elements.length; index++) { 
      let element = regForm.elements[index]; 
      if (!element.value){
        inputsFilled = false
       }
      if(inputsFilled){
        document.querySelector(".modal-window").style.display = "flex"
      }
    } 
  }
)

```